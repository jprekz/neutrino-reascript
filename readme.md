NEUTRINO ReaScript
------

REAPER上で打ち込んだMIDIと歌詞データから、ワンクリックで[NEUTRINO歌声シンセサイザー](https://studio-neutrino.com)を用いた歌声合成・プロジェクトへのインポートを行うことができるREAPER専用スクリプトです。

**現在開発中により動作が非常に不安定です。このソフトウェアによって生じたいかなる損害について作者は責任を負いません。それでも使用する場合は常にバックアップを取って使用してください。**

## インストールと起動
REAPERリソースディレクトリ内のScriptsディレクトリ内にneutrino.luaを配置してください。

REAPER起動後、メニューの`Actions`->`Show actions list...`を選択してアクションリストダイアログを表示し、右下の`New action...`から`Load ReaScript...`を選択し、neutrino.luaを選択してください。

アクションリストに`Script: neutrino.lua`が追加されるので、これを直接ダブルクリックするか任意のメニューに割り当てるなどして起動してください。

## 使用方法
初回起動時はまずNEUTRINOのインストール先を設定する必要があります。NEUTRINO ReaScriptウィンドウ下部の`NEUTRINO directory`下の部分をクリックするとファイル選択ダイアログが開くので、NEUTRINOインストール先の`Run.bat`を選択してください。正しく設定されると緑のチェックマークが表示されます。

REAPER内で打ち込み、適切に歌詞が設定されたMIDIアイテムを選択し、NEUTRINO ReaScriptウィンドウでパラメータを設定したあと、STARTボタンを押すと合成が開始されます。正常に合成が行われるとその間REAPERがフリーズしますが、しばらく何もせずにお待ちください。（REAPER側の制約によるもので、フリーズしないようにすることは困難と思われます）

合成が完了すると、元のMIDIアイテムと同じアイテム内に別テイクとしてWAVファイルが挿入されます。このWAVファイルはプロジェクトファイルと同じディレクトリに生成され、NEUTRINOの中間ファイルはプロジェクトファイルと同じディレクトリ内のNEUTRINOディレクトリにまとめて生成されます。NEUTRINOインストール先のディレクトリ内には一切ファイルを生成しません。

## MIDIの打ち込み方と仕様
- 基本的にはREAPER内の五線譜モードを用いることをおすすめします。音符の右クリックメニュー->`Lyrics...`から歌詞を設定できます。歌詞はひらがなで一文字ずつ設定してください。
- ピアノロールモードでは、ピアノロール下部のイベントレーンに`Text Events`を表示すると歌詞を設定できます。歌詞イベントのタイミングは音符のタイミングと正確に一致させる必要があります。
- すべての音符に歌詞を設定する必要があります。
- ブレスの挿入は独自の仕様となっており、五線譜モードからブレス記号を入力するなどしても反応しません。代わりに、歌詞の後ろに`br`という文字列をつけることでブレスを挿入できます。
  - 現時点では休符にブレスを設定できません(対応予定)。
- MIDIデータの先頭にある程度の長さの休符が必要です（NEUTRINO側の仕様？）。
